"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[241],{1241:(Et,x,s)=>{s.r(x),s.d(x,{AcquisitionModule:()=>Lt});var c=s(9808),r=s(4999),u=s(3075),m=s(8966);class v{constructor(o){this.id=o.id,this.acquereur_id=o.acquereur_id,this.acquereur=o.acquereur,this.code=o.code,this.site_id=o.site_id,this.site=o.site,this.terrain_id=o.terrain_id,this.terrain=o.terrain,this.dateAcquisition=o.dateAcquisition,this.montant=o.montant,this.created_at=o.created_at,this.updated_at=o.updated_at,this.createdauteur=o.createdauteur,this.updatedauteur=o.updatedauteur}}var S=s(8943),U=s(2430),Y=s(1254),t=s(5e3),A=s(3647),N=s(4922),y=s(7454),J=s(5369),_=s(7322),I=s(4107),Q=s(508),C=s(7531),g=s(7423);function D(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.libelle)}}function V(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE("",e.code,"-",e.numero,"")}}function M(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.genre," ",e.nom," ",e.prenom,"")}}let q=(()=>{class i{constructor(e,n,a,l,p,f,h){this._formBuilder=e,this.matDialogRef=a,this._acquisitionService=l,this._terrainService=p,this._siteService=f,this._acquereurService=h,this.action="new",this.formFieldHelpers=[""],this.listeTerrain=[],this.listeSite=[],this.listeAcquereur=[],this.action=n.action,this.acquisition=new v(n.acquisition),this.acquisitionForm=this.createAcquisitionForm()}ngOnInit(){this._terrainService.getAll().subscribe(e=>{this.listeTerrain.push(new S.H({})),this.listeTerrain.push(...e)}),this._siteService.getAll().subscribe(e=>{this.listeSite.push(new U.T({})),this.listeSite.push(...e)}),this._acquereurService.getAll().subscribe(e=>{this.listeAcquereur.push(new Y.J({})),this.listeAcquereur.push(...e)})}createAcquisitionForm(){return this._formBuilder.group({id:[this.acquisition.id],acquereur_id:[this.acquisition.acquereur_id],dateAcquisition:[this.acquisition.dateAcquisition],site_id:[this.acquisition.site_id],terrain_id:[this.acquisition.terrain_id],montant:[this.acquisition.montant]})}onSubmit(){if("new"==this.action){let e=this.acquisitionForm.getRawValue();this._acquisitionService.add(e).subscribe(n=>{console.log(n),this.matDialogRef.close(this.acquisitionForm)},n=>{console.log(n)})}else this._acquisitionService.update(this.acquisitionForm.getRawValue()).subscribe(e=>{this.matDialogRef.close(this.acquisitionForm)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.qu),t.Y36(m.WI),t.Y36(m.so),t.Y36(A.I),t.Y36(N.U),t.Y36(y.P),t.Y36(J.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-acquisitions"]],inputs:{name:"name"},decls:36,vars:12,consts:[["mat-dialog-title",""],[1,"sm:p-6","w-200"],[1,"",3,"formGroup"],[1,"flex","flex-col","w-full"],[1,"flex"],[1,"w-1/2","pr-1"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","required","",3,"formControlName"],["matInput","","type","number","required","",3,"formControlName"],["align","end"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-button","",3,"disabled","click"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Site"),t.qZA(),t.TgZ(9,"mat-select",6),t.YNc(10,D,2,2,"mat-option",7),t.qZA()(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Terrain"),t.qZA(),t.TgZ(14,"mat-select",6),t.YNc(15,V,2,3,"mat-option",7),t.qZA()()(),t.TgZ(16,"div",4)(17,"mat-form-field",5)(18,"mat-label"),t._uU(19,"Acquereur"),t.qZA(),t.TgZ(20,"mat-select",6),t.YNc(21,M,2,4,"mat-option",7),t.qZA()(),t.TgZ(22,"mat-form-field",5)(23,"mat-label"),t._uU(24,"Date d'acquisition"),t.qZA(),t._UZ(25,"input",8),t.qZA()(),t.TgZ(26,"div",4)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29,"Montant"),t.qZA(),t._UZ(30,"input",9),t.qZA()()()()(),t.TgZ(31,"mat-dialog-actions",10)(32,"button",11),t._uU(33,"Annuler"),t.qZA(),t.TgZ(34,"button",12),t.NdJ("click",function(){return n.onSubmit()}),t._uU(35),t.qZA()()),2&e&&(t.xp6(1),t.Oqu("new"==n.action?"Ajouter un acquisition":"Modifier l'acquisition "+n.acquisition.id),t.xp6(2),t.Q6J("formGroup",n.acquisitionForm),t.xp6(6),t.Q6J("formControlName","site_id"),t.xp6(1),t.Q6J("ngForOf",n.listeSite),t.xp6(4),t.Q6J("formControlName","terrain_id"),t.xp6(1),t.Q6J("ngForOf",n.listeTerrain),t.xp6(5),t.Q6J("formControlName","acquereur_id"),t.xp6(1),t.Q6J("ngForOf",n.listeAcquereur),t.xp6(4),t.Q6J("formControlName","dateAcquisition"),t.xp6(5),t.Q6J("formControlName","montant"),t.xp6(4),t.Q6J("disabled",!n.acquisitionForm.valid),t.xp6(1),t.hij(" ","new"==n.action?"Enregister":"Modifier",""))},directives:[m.uh,m.xY,u._Y,u.JL,u.sg,_.KE,_.hX,I.gD,u.Q7,u.JJ,u.u,c.sg,Q.ey,C.Nt,u.Fj,u.wV,m.H8,g.lW,m.ZT],styles:[""]}),i})();var T=s(6087),d=s(4521),Z=s(5245);function k(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," No. "),t.qZA())}const R=function(i){return["show",i]};function F(i,o){if(1&i&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,R,e.id)),t.xp6(1),t.Oqu(e.id)}}function O(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Acquereur "),t.qZA())}const H=function(i){return["/acquereur/show",i]};function j(i,o){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(3,H,e.acquereur.id)),t.xp6(1),t.AsE(" ",null==e.acquereur?null:e.acquereur.nom," ",null==e.acquereur?null:e.acquereur.prenom,"")}}function B(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Site "),t.qZA())}const L=function(i){return["/site/show",i]};function E(i,o){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,L,e.site.id)),t.xp6(1),t.hij(" ",null==e.site?null:e.site.libelle,"")}}function z(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Terrain "),t.qZA())}const $=function(i){return["/terrain/show",i]};function G(i,o){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(3,$,e.terrain.id)),t.xp6(1),t.AsE(" ",null==e.terrain?null:e.terrain.code," - ",null==e.terrain?null:e.terrain.numero," ")}}function P(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Montant "),t.qZA())}function X(i,o){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.montant)," ")}}function K(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Date acquisition "),t.qZA())}function W(i,o){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.dateAcquisition,"dd/MM/YYYY")," ")}}function tt(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Creation"),t.qZA())}function et(i,o){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.created_at,"dd/MM/YYYY")," ")}}function it(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1," Actions "),t.qZA())}function nt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",41)(1,"button",42),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().editer(l)}),t._UZ(2,"mat-icon",43),t.qZA(),t.TgZ(3,"button",42),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().supprimer(l)}),t._UZ(4,"mat-icon",44),t.qZA()()}}function ot(i,o){1&i&&t._UZ(0,"tr",45)}function at(i,o){1&i&&t._UZ(0,"tr",46)}const st=function(){return["/acquisition"]};let rt=(()=>{class i{constructor(e,n){this._matDialog=e,this._acquisitionService=n,this.searchControl=new u.NI,this.dataSource=new r.by([]),this.isLoading=!1,this.totalRows=0,this.pageSize=10,this.currentPage=0,this.pageSizeOptions=[5,10,25,50,100,500],this.displayedColumns=["id","acquereur","site","terrain","montant","dateAcquisition","creation","actions"]}ngAfterViewInit(){this.dataSource.paginator=this.paginator}recherche(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e}ngOnInit(){this._updateDataSource()}_updateDataSource(){if(sessionStorage.getItem("acquisitions")){let e=JSON.parse(sessionStorage.getItem("acquisitions"));this.dataSource.data=e.data,sessionStorage.setItem("acquisitions",JSON.stringify(e.data)),setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=e.total},1)}this._acquisitionService.getAllPaginate(this.pageSize,this.currentPage).subscribe(e=>{sessionStorage.setItem("acquisitions",JSON.stringify(e)),this.dataSource.data=e.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=e.total},1)},e=>{sessionStorage.removeItem("acquisitions")})}editer(e){this.dialogRef=this._matDialog.open(q,{panelClass:"",disableClose:!0,data:{acquisition:e,action:"edit"}}),this.dialogRef.afterClosed().subscribe(n=>{!n||this._updateDataSource()})}ajouter(){this.dialogRef=this._matDialog.open(q,{panelClass:"",disableClose:!0,data:{acquisition:{},action:"new"}}),this.dialogRef.afterClosed().subscribe(e=>{!e||this._updateDataSource()})}supprimer(e){this._acquisitionService.delete(e).subscribe(n=>{this._updateDataSource()})}pageChanged(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this._updateDataSource()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.uw),t.Y36(A.I))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-acquisitions"]],viewQuery:function(e,n){if(1&e&&(t.Gf(T.NW,5),t.Gf(r.BZ,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.table=a.first)}},decls:55,vars:12,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pr-6","pl-6","pt-1","pb-1","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLinkActive","router-link-active",1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-default-500"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","w-full","min-w-0"],[1,"flex","flex-col","w-full"],[1,"flex"],[1,"w-1/3"],["matInput","",3,"formControl","placeholder","ngModelChange"],[1,"w-2/3","text-right","items-center"],["mat-stroked-button","",1,"shadow","rounded-2xl","overflow-hidden","cursor-pointer","mt-2","ml-2","bg-card","bg-red-900",3,"click"],["svgIcon","iconsmind:add",2,"color","white"],[1,"ml-0","cursor-pointer",2,"color","white"],["mat-table","",1,"mat-elevation-z1","w-full",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","cursor:pointer",4,"matCellDef"],["matColumnDef","acquereur"],["mat-cell","",4,"matCellDef"],["matColumnDef","site"],["matColumnDef","terrain"],["matColumnDef","montant"],["matColumnDef","dateAcquisition"],["matColumnDef","creation"],["matColumnDef","actions"],["mat-cell","","class","text-justify",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"w-full"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-header-cell",""],["mat-cell","",2,"cursor","pointer"],[1,"text-primary-500",3,"routerLink"],["mat-cell",""],[1,"text-primary-500",2,"cursor","pointer",3,"routerLink"],["mat-cell","",1,"text-justify"],["mat-icon-button","",1,"hidden","sm:inline-flex","ml-3",3,"click"],["svgIcon","heroicons_solid:pencil"],["svgIcon","heroicons_solid:x"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t._uU(6,"Acquisition"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",7),t._uU(10,"Acquisition"),t.qZA()()()()(),t.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"mat-form-field",12)(16,"mat-label"),t._uU(17,"Rechercher"),t.qZA(),t.TgZ(18,"input",13),t.NdJ("ngModelChange",function(l){return n.recherche(l)}),t.qZA()(),t.TgZ(19,"div",14)(20,"button",15),t.NdJ("click",function(){return n.ajouter()}),t._UZ(21,"mat-icon",16),t._uU(22," \xa0 "),t.TgZ(23,"label",17),t._uU(24,"Ajouter"),t.qZA()()()(),t.TgZ(25,"table",18),t.ynx(26,19),t.YNc(27,k,2,0,"th",20),t.YNc(28,F,3,4,"td",21),t.BQk(),t.ynx(29,22),t.YNc(30,O,2,0,"th",20),t.YNc(31,j,3,5,"td",23),t.BQk(),t.ynx(32,24),t.YNc(33,B,2,0,"th",20),t.YNc(34,E,3,4,"td",23),t.BQk(),t.ynx(35,25),t.YNc(36,z,2,0,"th",20),t.YNc(37,G,3,5,"td",23),t.BQk(),t.ynx(38,26),t.YNc(39,P,2,0,"th",20),t.YNc(40,X,3,3,"td",23),t.BQk(),t.ynx(41,27),t.YNc(42,K,2,0,"th",20),t.YNc(43,W,3,4,"td",23),t.BQk(),t.ynx(44,28),t.YNc(45,tt,2,0,"th",20),t.YNc(46,et,3,4,"td",23),t.BQk(),t.ynx(47,29),t.YNc(48,it,2,0,"th",20),t.YNc(49,nt,5,0,"td",30),t.BQk(),t.YNc(50,ot,1,0,"tr",31),t.YNc(51,at,1,0,"tr",32),t.qZA(),t.TgZ(52,"div",33)(53,"mat-paginator",34,35),t.NdJ("page",function(l){return n.pageChanged(l)}),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(11,st)),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(10),t.Q6J("formControl",n.searchControl)("placeholder","Search for a page or a contact"),t.xp6(7),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("length",n.totalRows)("pageIndex",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",n.pageSizeOptions))},directives:[d.yS,d.Od,Z.Hw,_.KE,_.hX,C.Nt,u.Fj,u.JJ,u.oH,g.lW,r.BZ,r.w1,r.fO,r.ge,r.Dz,r.ev,d.rH,r.as,r.XQ,r.nj,r.Gk,T.NW],pipes:[c.JJ,c.uU],styles:[""]}),i})();var lt=s(9703),ut=s(2340),b=s(7261),w=s(8951),ct=s(8725),mt=s(5166),dt=s(5103),pt=s(1683),ft=s(1200),ht=s(2057),_t=s(7238);function gt(i,o){1&i&&t._UZ(0,"mat-icon",26)}function qt(i,o){1&i&&t._UZ(0,"mat-icon",27)}function vt(i,o){1&i&&t._UZ(0,"mat-icon",26)}function At(i,o){1&i&&t._UZ(0,"mat-icon",28)}function Zt(i,o){1&i&&(t.TgZ(0,"th",29),t._uU(1," No. "),t.qZA())}function xt(i,o){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Ct(i,o){1&i&&(t.TgZ(0,"th",29),t._uU(1," Montant "),t.qZA())}function Tt(i,o){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.montant," ")}}function bt(i,o){1&i&&(t.TgZ(0,"th",29),t._uU(1," Cr\xe9ation "),t.qZA())}function wt(i,o){if(1&i&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.created_at,"dd/MM/YY")," ")}}function St(i,o){1&i&&(t.TgZ(0,"th",29),t._uU(1," Actions "),t.qZA())}function Ut(i,o){if(1&i&&(t.TgZ(0,"span",34),t._uU(1,"annul\xe9"),t.qZA()),2&i){const e=t.oxw().$implicit;t.hYB("matTooltip","",e.motif," [",e.cancelled_at,"]")}}function Yt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().restorer(a)}),t._UZ(1,"mat-icon",36),t.qZA()}}function Nt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().annuler(a)}),t._UZ(1,"mat-icon",37),t.qZA()}}function yt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().supprimer2(a)}),t._UZ(1,"mat-icon",38),t.qZA()}}function Jt(i,o){if(1&i&&(t.TgZ(0,"td",31),t.YNc(1,Ut,2,2,"span",32),t.YNc(2,Yt,2,0,"button",33),t.YNc(3,Nt,2,0,"button",33),t.YNc(4,yt,2,0,"button",33),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.cancelled_at),t.xp6(1),t.Q6J("ngIf",e.cancelled_at),t.xp6(1),t.Q6J("ngIf",!e.cancelled_at),t.xp6(1),t.Q6J("ngIf",e.cancelled_at)}}function It(i,o){1&i&&t._UZ(0,"tr",39)}function Qt(i,o){1&i&&t._UZ(0,"tr",40)}let Dt=(()=>{class i{constructor(e,n,a,l,p,f,h){this.route=e,this._matDialog=n,this._fuseConfirmationService=a,this._snackBar=l,this._projetService=p,this._authService=f,this._versementService=h,this.dataSourceversement=new r.by,this.displayedColumnsversement=["id","montant","createdAt","actions"],this.data={},this.montant_verse=0}ngOnInit(){}addVersement(){this.dialogRef=this._matDialog.open(mt.s,{panelClass:"",data:{versement:{inscription_id:"",classe_id:""}}}),this.dialogRef.afterClosed().subscribe(e=>{!e||this.getHistoriqueVersement()})}getHistoriqueVersement(){this._versementService.getEleveDetailVersementByAnneeAndEleve({eleve_id:"",annee_id:this._projetService.projet.id}).subscribe(e=>{this.dataSourceversement.data=e.versements,this.montant_verse=e.montant_verse},e=>{this.dataSourceversement.data=[],console.log(e)})}restorer(e){this.dialogRef=this._fuseConfirmationService.open({title:"Restauration de versement",message:"Voulez-vous restaurer le versement N "+e.id+" ?"}),this.dialogRef.afterClosed().subscribe(n=>{"confirmed"===n&&this._versementService.restore({id:e.id}).subscribe(a=>{console.log(a),this.getHistoriqueVersement()})})}annuler(e){this.dialogRef=this._matDialog.open(dt.H,{data:{id:e.id}}),this.dialogRef.afterClosed().subscribe(n=>{!n||(console.log(n),this._versementService.cancelle(n).subscribe(a=>{this.getHistoriqueVersement(),console.log(a)},a=>{console.log(a)}))})}supprimer2(e){this.dialogRef=this._fuseConfirmationService.open({title:"Suppression de versement",message:"Voulez-vous supprimer le versement N "+e.id+" ?"}),this.dialogRef.afterClosed().subscribe(n=>{"confirmed"===n&&this._versementService.delete(e).subscribe(a=>{console.log(a),this.getHistoriqueVersement()})})}downloadInvoice(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.gz),t.Y36(m.uw),t.Y36(pt.R),t.Y36(b.ux),t.Y36(ft.Z),t.Y36(w.e),t.Y36(ht._))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-versement-short"]],inputs:{acquisition:"acquisition"},decls:48,vars:13,consts:[[1,"flex","flex-col","w-full","mt-8","sm:mt-2","pb-0","sm:p-10","sm:pt-1","sm:pb-0","shadow","rounded-2xl","bg-card","mb-6"],[1,"flex","flex-col","w-full"],[1,"flex","pt-2"],[1,"w-1/2","pr-2"],[1,"w-1/2","text-2xl","font-bold","tracking-tight"],[1,"w-1/2","pr-l","text-center"],[1,"w-1/2","font-bold"],[1,"w-1/2"],[1,"w-1/2","pr-l","text-right"],[1,"flex","w-1/2","pr-l","text-right"],[1,"w-2/3"],["mat-button","",1,"h-6","min-h-6","px-2","rounded-full","bg-hover","cursor-pointer","bg-red-900",3,"click"],["style","color: white;","svgIcon","iconsmind:refresh","class","animate-spin-slow",4,"ngIf"],["style","color: white;","svgIcon","iconsmind:printer",4,"ngIf"],["style","color: white;","svgIcon","iconsmind:add",4,"ngIf"],[1,"flex"],["mat-table","","id","dvContainerdvContainer",1,"w-full",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","montant"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-cell","","class","text-justify","style","align-items: center;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["svgIcon","iconsmind:refresh",1,"animate-spin-slow",2,"color","white"],["svgIcon","iconsmind:printer",2,"color","white"],["svgIcon","iconsmind:add",2,"color","white"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"text-justify",2,"align-items","center"],["class","shadow rounded-2xl overflow-hidden pr-2 pl-2 bg-card  bg-red-900 text-white",3,"matTooltip",4,"ngIf"],["class","hidden sm:inline-flex ml-3","mat-icon-button","",3,"click",4,"ngIf"],[1,"shadow","rounded-2xl","overflow-hidden","pr-2","pl-2","bg-card","bg-red-900","text-white",3,"matTooltip"],["mat-icon-button","",1,"hidden","sm:inline-flex","ml-3",3,"click"],["svgIcon","restore"],["svgIcon","heroicons_solid:ban",1,"text-red-900"],["svgIcon","cancel",1,"text-red-900"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Versements"),t.qZA()(),t.TgZ(6,"div",5)(7,"label",6),t._uU(8,"Montant : "),t.qZA(),t.TgZ(9,"label",7),t._uU(10),t.ALo(11,"number"),t.qZA()(),t.TgZ(12,"div",8)(13,"label",6),t._uU(14,"Reste \xe0 payer : "),t.qZA(),t.TgZ(15,"label",7),t._uU(16),t.ALo(17,"number"),t.qZA()(),t.TgZ(18,"div",9),t._UZ(19,"div",10),t.TgZ(20,"div",7)(21,"button",11),t.NdJ("click",function(){return n.downloadInvoice()}),t.YNc(22,gt,1,0,"mat-icon",12),t._uU(23," \xa0 "),t.YNc(24,qt,1,0,"mat-icon",13),t._uU(25," \xa0 "),t.qZA()(),t.TgZ(26,"div",7)(27,"button",11),t.NdJ("click",function(){return n.addVersement()}),t.YNc(28,vt,1,0,"mat-icon",12),t._uU(29," \xa0 "),t.YNc(30,At,1,0,"mat-icon",14),t._uU(31," \xa0 "),t.qZA()()()()(),t.TgZ(32,"div",15)(33,"table",16),t.ynx(34,17),t.YNc(35,Zt,2,0,"th",18),t.YNc(36,xt,2,1,"td",19),t.BQk(),t.ynx(37,20),t.YNc(38,Ct,2,0,"th",18),t.YNc(39,Tt,2,1,"td",19),t.BQk(),t.ynx(40,21),t.YNc(41,bt,2,0,"th",18),t.YNc(42,wt,3,4,"td",19),t.BQk(),t.ynx(43,22),t.YNc(44,St,2,0,"th",18),t.YNc(45,Jt,5,4,"td",23),t.BQk(),t.YNc(46,It,1,0,"tr",24),t.YNc(47,Qt,1,0,"tr",25),t.qZA()()()),2&e&&(t.xp6(10),t.Oqu(t.lcZ(11,9,n.acquisition.montant)),t.xp6(6),t.Oqu(t.lcZ(17,11,n.acquisition.montant-n.montant_verse)),t.xp6(6),t.Q6J("ngIf",n.data.btnprinter),t.xp6(2),t.Q6J("ngIf",!n.data.btnprinter),t.xp6(4),t.Q6J("ngIf",n.data.btnadd),t.xp6(2),t.Q6J("ngIf",!n.data.btnadd),t.xp6(3),t.Q6J("dataSource",n.dataSourceversement),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumnsversement),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumnsversement))},directives:[g.lW,c.O5,Z.Hw,r.BZ,r.w1,r.fO,r.ge,r.Dz,r.ev,_t.gM,r.as,r.XQ,r.nj,r.Gk],pipes:[c.JJ,c.uU],styles:[""]}),i})();const Vt=["supportNgForm"],Mt=["avatarFileInput"];function kt(i,o){if(1&i&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE("Cr\xe9\xe9 le :",t.xi3(2,2,null==e.acquisition?null:e.acquisition.created_at,"dd/MM/YYYY")," par ",null==e.acquisition?null:e.acquisition.createdauteur,"")}}function Rt(i,o){if(1&i&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE("Mise \xe0 jour le :",t.xi3(2,2,null==e.acquisition?null:e.acquisition.updated_at,"dd/MM/YYYY")," ",null!=e.acquisition&&e.acquisition.updateddauteur?"par "+(null==e.acquisition?null:e.acquisition.updateddauteur):"","")}}const Ft=function(){return["/acquisitions"]},Ot=function(i){return["/acquisitions/show",i]};let Ht=(()=>{class i{constructor(e,n,a,l,p,f){this._matDialog=e,this._snackBar=n,this._formBuilder=a,this._acquisitionService=l,this.route=p,this._authService=f,this.urlForBackend="",this.token="",this.editMode=!1,this.acquisitionAvatarForm=new u.NI(""),this.acquisition=new v({}),this.firstElement="",this.geoJSON=null,this.urlForBackend=ut.N.urlApi,this.token=this._authService.accessToken,p.params.subscribe(h=>{this.acquisition_id=Number(h.acquisition_id)})}ngOnInit(){this._acquisitionService.get(this.acquisition_id).subscribe(e=>{this.acquisition=new v(e)})}editer(){this.dialogRef=this._matDialog.open(q,{panelClass:"",data:{acquisition:this.acquisition,action:"edit"}}),this.dialogRef.afterClosed().subscribe(e=>{!e||this.ngOnInit()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.uw),t.Y36(b.ux),t.Y36(u.qu),t.Y36(A.I),t.Y36(d.gz),t.Y36(w.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-show-acquisition"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Vt,5),t.Gf(Mt,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.supportNgForm=a.first),t.iGM(a=t.CRH())&&(n._avatarFileInput=a.first)}},decls:64,vars:24,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pr-6","pl-6","pt-1","pb-1","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLinkActive","router-link-active",1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full"],[1,"mt-2","text-4xl","sm:text-2xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-2","sm:mt-2","pb-7","sm:p-6","sm:pb-0","shadow","rounded-2xl","bg-card"],[1,"space-y-1","flex","flex-col","p-1"],[1,"flex","pt-0"],[1,"w-1/3","pr-l"],[1,"w-1/2"],[1,"w-2/3","pr-l"],[1,"flex","pt-6"],["class","rounded-2xl text-white text-sm bg-primary-500",4,"ngIf"],["mat-button","",1,"text-sm","h-6","min-h-6","px-2","rounded-full","bg-hover","cursor-pointer","bg-primary-900"],["svgIcon","iconsmind:printer",2,"color","white"],[1,"ml-0","cursor-pointer",2,"color","white"],[3,"parent_id","parent_typedocument"],[3,"acquisition"],[1,"rounded-2xl","text-white","text-sm","bg-primary-500"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t._uU(6,"Acquisitions"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",4),t._uU(10,"Information de l'acquisition"),t.qZA()()()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"div",9),t._uU(14," D\xe9tail de l'acquisition "),t.qZA(),t.TgZ(15,"div",10)(16,"div",11)(17,"div",8)(18,"div",12)(19,"div",13)(20,"label",14),t._uU(21,"Code : "),t.qZA(),t.TgZ(22,"label",14),t._uU(23),t.qZA()(),t.TgZ(24,"div",15)(25,"label",14),t._uU(26,"Acquereur : "),t.qZA(),t.TgZ(27,"label",14),t._uU(28),t.qZA()()()(),t.TgZ(29,"div",8)(30,"div",16)(31,"div",13)(32,"label",14),t._uU(33,"Montant : "),t.qZA(),t.TgZ(34,"label",14),t._uU(35),t.ALo(36,"number"),t.qZA()(),t.TgZ(37,"div",13)(38,"label",14),t._uU(39,"Date acquisition : "),t.qZA(),t.TgZ(40,"label",14),t._uU(41),t.ALo(42,"date"),t.qZA()(),t.TgZ(43,"div",13)(44,"label",14),t._uU(45,"Terrain : "),t.qZA(),t.TgZ(46,"label",14),t._uU(47),t.qZA()()()()(),t.TgZ(48,"div",8)(49,"div",16)(50,"div",13),t.YNc(51,kt,3,5,"span",17),t.qZA(),t.TgZ(52,"div",13),t.YNc(53,Rt,3,5,"span",17),t.qZA(),t.TgZ(54,"div",13)(55,"button",18),t._UZ(56,"mat-icon",19),t._uU(57," \xa0 "),t.TgZ(58,"label",20),t._uU(59,"Generer contrat"),t.qZA()()()()()()(),t.TgZ(60,"div",8),t._UZ(61,"app-media",21),t.qZA(),t.TgZ(62,"div",8),t._UZ(63,"app-versement-short",22),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(21,Ft)),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(1),t.Q6J("routerLink",t.VKq(22,Ot,n.acquisition.id)),t.xp6(14),t.Oqu(null==n.acquisition?null:n.acquisition.code),t.xp6(5),t.lnq("",null==n.acquisition||null==n.acquisition.acquereur?null:n.acquisition.acquereur.genre," ",null==n.acquisition||null==n.acquisition.acquereur?null:n.acquisition.acquereur.nom," ",null==n.acquisition||null==n.acquisition.acquereur?null:n.acquisition.acquereur.prenom,""),t.xp6(7),t.Oqu(t.lcZ(36,16,null==n.acquisition?null:n.acquisition.montant)),t.xp6(6),t.Oqu(t.xi3(42,18,null==n.acquisition?null:n.acquisition.dateAcquisition,"dd/MM/YYYY")),t.xp6(6),t.AsE("",null==n.acquisition||null==n.acquisition.terrain?null:n.acquisition.terrain.code,"-",null==n.acquisition||null==n.acquisition.terrain?null:n.acquisition.terrain.numero,""),t.xp6(4),t.Q6J("ngIf",null==n.acquisition?null:n.acquisition.created_at),t.xp6(2),t.Q6J("ngIf",null==n.acquisition?null:n.acquisition.updated_at),t.xp6(8),t.Q6J("parent_id",n.acquisition_id)("parent_typedocument","DOSSIER_ACQUISITIONS"),t.xp6(2),t.Q6J("acquisition",n.acquisition))},directives:[d.yS,d.Od,Z.Hw,c.O5,g.lW,ct.R,Dt],pipes:[c.JJ,c.uU],styles:[""]}),i})();var jt=s(9879);const Bt=[{path:"",component:rt},{path:"add",component:q},{path:"show/:acquisition_id",component:Ht}];let Lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,d.Bz.forChild(Bt),lt.m,jt.g]]}),i})()}}]);