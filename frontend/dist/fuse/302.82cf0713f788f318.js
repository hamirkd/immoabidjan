"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[302],{9302:(W,x,a)=>{a.r(x),a.d(x,{ProjetModule:()=>V});var d=a(9808),l=a(3075),s=a(4999),u=a(8966),f=a(6466),t=a(5e3),g=a(1200),m=a(7322),_=a(7531),h=a(7423);let v=(()=>{class o{constructor(e,i,r,c){this._formBuilder=e,this._data=i,this.matDialogRef=r,this._ProjetService=c,this.action="new",this.formFieldHelpers=[""],this.action=i.action,this.Projet=new f.p(i.Projet),this.ProjetForm=this.createProjetForm()}ngOnInit(){}createProjetForm(){return this._formBuilder.group({id:[this.Projet.id],code:[this.Projet.code],intitule:[this.Projet.intitule],objectif:[this.Projet.objectif]})}onSubmit(){if("new"==this.action){let e=this.ProjetForm.getRawValue();this._ProjetService.add(e).subscribe(i=>{console.log(i),this.matDialogRef.close(this.ProjetForm)},i=>{console.log(i)})}else this._ProjetService.update(this.ProjetForm.getRawValue()).subscribe(e=>{console.log(e),this.matDialogRef.close(this.ProjetForm)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(u.WI),t.Y36(u.so),t.Y36(g.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-projet"]],inputs:{name:"name"},decls:23,vars:9,consts:[["mat-dialog-title",""],[1,"sm:p-6","w-200"],[1,"",3,"formGroup"],[1,"flex","flex-col","w-full"],[1,"flex"],[1,"w-1/3","pr-2"],["matInput","","required","",3,"formControlName"],[1,"w-2/3","pl-2"],[1,"fuse-mat-textarea","flex-auto",3,"ngClass"],["matInput","","matTextareaAutosize","",3,"formControlName","rows"],["align","end"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-button","",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"code"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"intitule"),t.qZA(),t._UZ(13,"input",6),t.qZA()(),t.TgZ(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Objectif"),t.qZA(),t._UZ(17,"textarea",9),t.qZA()()()(),t.TgZ(18,"mat-dialog-actions",10)(19,"button",11),t._uU(20,"Annuler"),t.qZA(),t.TgZ(21,"button",12),t.NdJ("click",function(){return i.onSubmit()}),t._uU(22),t.qZA()()),2&e&&(t.xp6(1),t.Oqu("new"==i.action?"Ajouter un Projet":"Modifier l'Projet "+i.Projet.intitule),t.xp6(2),t.Q6J("formGroup",i.ProjetForm),t.xp6(6),t.Q6J("formControlName","code"),t.xp6(4),t.Q6J("formControlName","intitule"),t.xp6(1),t.Q6J("ngClass",i.formFieldHelpers),t.xp6(3),t.Q6J("formControlName","objectif")("rows",3),t.xp6(4),t.Q6J("disabled",!i.ProjetForm.valid),t.xp6(1),t.hij(" ","new"==i.action?"Enregister":"Modifier",""))},directives:[u.uh,u.xY,l._Y,l.JL,l.sg,m.KE,m.hX,_.Nt,l.Fj,l.Q7,l.JJ,l.u,d.mk,u.H8,h.lW,u.ZT],styles:[""]}),o})();var p=a(4521),Z=a(5245);function C(o,n){1&o&&(t.TgZ(0,"th",28),t._uU(1," No. "),t.qZA())}const b=function(o){return["detail",o]};function w(o,n){if(1&o&&(t.TgZ(0,"td",29)(1,"span",30),t._uU(2),t.qZA()()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,b,e.id)),t.xp6(1),t.Oqu(e.id)}}function T(o,n){1&o&&(t.TgZ(0,"th",28),t._uU(1," intitule "),t.qZA())}function A(o,n){if(1&o&&(t.TgZ(0,"td",29)(1,"span",31),t._uU(2),t.qZA()()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,b,e.id)),t.xp6(1),t.hij(" ",e.intitule,"")}}function P(o,n){1&o&&(t.TgZ(0,"th",28),t._uU(1," Creation"),t.qZA())}function J(o,n){if(1&o&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.created_at,"dd/MM/YYYY")," ")}}function y(o,n){1&o&&(t.TgZ(0,"th",28),t._uU(1," Actions "),t.qZA())}function N(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",32)(1,"button",33),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().editer(c)}),t._UZ(2,"mat-icon",34),t.qZA(),t.TgZ(3,"button",33),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().supprimer(c)}),t._UZ(4,"mat-icon",35),t.qZA()()}}function U(o,n){1&o&&t._UZ(0,"tr",36)}function I(o,n){1&o&&t._UZ(0,"tr",37)}const D=function(){return["/projet"]};let Q=(()=>{class o{constructor(e,i){this._matDialog=e,this._ProjetService=i,this.searchControl=new l.NI,this.dataSource=new s.by,this.displayedColumns=["id","intitule","creation","actions"]}recherche(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e}ngOnInit(){this._updateDataSource()}_updateDataSource(){this._ProjetService.getAll().subscribe(e=>{this.dataSource.data=e})}editer(e){this.dialogRef=this._matDialog.open(v,{panelClass:"",data:{Projet:e,action:"edit"}}),this.dialogRef.afterClosed().subscribe(i=>{!i||this._updateDataSource()})}ajouter(){this.dialogRef=this._matDialog.open(v,{panelClass:"",data:{Projet:{},action:"new"}}),this.dialogRef.afterClosed().subscribe(e=>{!e||this._updateDataSource()})}supprimer(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.uw),t.Y36(g.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-Projet"]],decls:40,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pr-6","pl-6","pt-1","pb-1","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLinkActive","router-link-active",1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-default-500"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","w-full","min-w-0"],[1,"flex","flex-col","w-full"],[1,"flex"],[1,"w-1/3"],["matInput","",3,"formControl","placeholder","ngModelChange"],[1,"w-2/3","text-right","items-center"],["mat-stroked-button","",1,"shadow","rounded-2xl","overflow-hidden","cursor-pointer","mt-2","ml-2","bg-card","bg-red-900",3,"click"],["svgIcon","iconsmind:add",2,"color","white"],[1,"ml-0","cursor-pointer",2,"color","white"],["mat-table","",1,"mat-elevation-z1","w-full",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","intitule"],["matColumnDef","creation"],["matColumnDef","actions"],["mat-cell","","class","text-justify",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"routerLink"],[1,"text-primary-500",2,"cursor","pointer",3,"routerLink"],["mat-cell","",1,"text-justify"],["mat-icon-button","",1,"hidden","sm:inline-flex","ml-3",3,"click"],["svgIcon","heroicons_solid:pencil"],["svgIcon","heroicons_solid:x"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t._uU(6,"Projet"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",7),t._uU(10,"Projet"),t.qZA()()()()(),t.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"mat-form-field",12)(16,"mat-label"),t._uU(17,"Rechercher"),t.qZA(),t.TgZ(18,"input",13),t.NdJ("ngModelChange",function(c){return i.recherche(c)}),t.qZA()(),t.TgZ(19,"div",14)(20,"button",15),t.NdJ("click",function(){return i.ajouter()}),t._UZ(21,"mat-icon",16),t._uU(22," \xa0 "),t.TgZ(23,"label",17),t._uU(24,"Ajouter"),t.qZA()()()(),t.TgZ(25,"table",18),t.ynx(26,19),t.YNc(27,C,2,0,"th",20),t.YNc(28,w,3,4,"td",21),t.BQk(),t.ynx(29,22),t.YNc(30,T,2,0,"th",20),t.YNc(31,A,3,4,"td",21),t.BQk(),t.ynx(32,23),t.YNc(33,P,2,0,"th",20),t.YNc(34,J,3,4,"td",21),t.BQk(),t.ynx(35,24),t.YNc(36,y,2,0,"th",20),t.YNc(37,N,5,0,"td",25),t.BQk(),t.YNc(38,U,1,0,"tr",26),t.YNc(39,I,1,0,"tr",27),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(7,D)),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(10),t.Q6J("formControl",i.searchControl)("placeholder","Search for a page or a contact"),t.xp6(7),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[p.yS,p.Od,Z.Hw,m.KE,m.hX,_.Nt,l.Fj,l.JJ,l.oH,h.lW,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,p.rH,s.as,s.XQ,s.nj,s.Gk],pipes:[d.uU],styles:[""]}),o})();var F=a(9703),k=a(2340),q=a(8951),Y=a(508);const M=["supportNgForm"],S=["avatarFileInput"];function H(o,n){if(1&o&&(t.TgZ(0,"fuse-alert",14),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.Q6J("type",e.alert.type)("showIcon",!1),t.xp6(1),t.hij(" ",e.alert.message," ")}}function R(o,n){if(1&o&&(t.TgZ(0,"div",15)(1,"div",2)(2,"div",16)(3,"div",17)(4,"label",18),t._uU(5,"Code : "),t.qZA(),t.TgZ(6,"label",18),t._uU(7),t.qZA()(),t.TgZ(8,"div",19)(9,"label",18),t._uU(10,"Intitul\xe9 : "),t.qZA(),t.TgZ(11,"label",18),t._uU(12),t.qZA()()()(),t._UZ(13,"div",2),t.qZA()),2&o){const e=t.oxw();t.xp6(7),t.Oqu(null==e.projet?null:e.projet.code),t.xp6(5),t.Oqu(null==e.projet?null:e.projet.intitule)}}function B(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"form",20)(2,"div",2)(3,"div",21)(4,"mat-form-field",17)(5,"mat-label"),t._uU(6,"code"),t.qZA(),t._UZ(7,"input",22),t.qZA(),t.TgZ(8,"mat-form-field",23)(9,"mat-label"),t._uU(10,"intitule"),t.qZA(),t._UZ(11,"input",22),t.qZA()(),t.TgZ(12,"mat-form-field",24)(13,"mat-label"),t._uU(14,"Objectif"),t.qZA(),t._UZ(15,"textarea",25),t.qZA()(),t.TgZ(16,"div",2)(17,"div",26)(18,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleEditMode()}),t._uU(19,"Annuler"),t.qZA(),t.TgZ(20,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(21,"label",29),t._uU(22,"Modifier"),t.qZA()()()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.projetForm),t.xp6(6),t.Q6J("formControlName","code"),t.xp6(4),t.Q6J("formControlName","intitule"),t.xp6(1),t.Q6J("ngClass",e.formFieldHelpers),t.xp6(3),t.Q6J("formControlName","objectif")("rows",3),t.xp6(5),t.Q6J("disabled",!e.projetForm.valid)}}function O(o,n){if(1&o&&t._UZ(0,"img",39),2&o){const e=t.oxw(2);t.Q6J("src","api/projet/getAvatar/"+(null==e.projet?null:e.projet.id)+"?token="+e.token,t.LSH)}}function E(o,n){if(1&o&&(t.TgZ(0,"div",40),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.projet.intitule.charAt(0)," ")}}function L(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",30)(2,"div",31)(3,"div",32)(4,"div")(5,"input",33,34),t.NdJ("change",function(){t.CHM(e);const r=t.MAs(6);return t.oxw().uploadAvatar(r.files)}),t.qZA(),t.TgZ(7,"label",35),t._UZ(8,"mat-icon",36),t.qZA()(),t.TgZ(9,"div")(10,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeAvatar()}),t._UZ(11,"mat-icon",36),t.qZA()()(),t.YNc(12,O,1,1,"img",37),t.YNc(13,E,2,1,"div",38),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(1),t.Q6J("ngIf",null==e.projet?null:e.projet.avatar),t.xp6(1),t.Q6J("ngIf",!(null!=e.projet&&e.projet.avatar))}}function z(o,n){if(1&o&&t._UZ(0,"img",39),2&o){const e=t.oxw(2);t.Q6J("src",e.urlForBackend+"api/projet/getAvatar/"+(null==e.projet?null:e.projet.id)+"?token="+e.token,t.LSH)}}function G(o,n){if(1&o&&(t.TgZ(0,"div",40),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",null==e.projet||null==e.projet.intitule?null:e.projet.intitule.charAt(0)," ")}}function X(o,n){if(1&o&&(t.TgZ(0,"div",2)(1,"div",30)(2,"div",41),t.YNc(3,z,1,1,"img",37),t.YNc(4,G,2,1,"div",38),t.qZA()()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",null==e.projet?null:e.projet.avatar),t.xp6(1),t.Q6J("ngIf",!(null!=e.projet&&e.projet.avatar))}}const K=[{path:"",component:Q},{path:"detail/:projet_id",component:(()=>{class o{constructor(e,i,r,c,j){this._matDialog=e,this._formBuilder=i,this._projetService=r,this.route=c,this._authService=j,this.urlForBackend="",this.token="",this.editMode=!1,this.projetAvatarForm=new l.NI(""),this.projet=new f.p({}),this.urlForBackend=k.N.urlApi,this.token=this._authService.accessToken,c.params.subscribe($=>{this.projet_id=Number($.projet_id)})}createProjetForm(){return this._formBuilder.group({id:[this.projet.id],code:[this.projet.code],intitule:[this.projet.intitule],objectif:[this.projet.objectif]})}ngOnInit(){this._projetService.get(this.projet_id).subscribe(e=>{this.projet=new f.p(e),this.projetForm=this.createProjetForm()})}clearForm(){this.supportNgForm.resetForm()}sendForm(){console.log("Your message has been sent!"),this.alert={type:"success",message:"Your request has been delivered! A member of our support staff will respond as soon as possible."},setTimeout(()=>{this.alert=null},7e3),this.clearForm()}toggleEditMode(){this.editMode=!this.editMode}removeAvatar(){this._projetService.removeAvatar(this.projet.id).subscribe(e=>{this.ngOnInit()})}uploadAvatar(e){if(!e.length)return;const r=e[0];!["image/jpeg","image/png"].includes(r.type)||this._projetService.uploadAvatar(this.projet.id+"",r).subscribe(c=>{this.projet=c})}onSubmit(){this._projetService.update(this.projetForm.getRawValue()).subscribe(e=>{console.log(e),this.ngOnInit(),this.toggleEditMode()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.uw),t.Y36(l.qu),t.Y36(g.Z),t.Y36(p.gz),t.Y36(q.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-detail-projet"]],viewQuery:function(e,i){if(1&e&&(t.Gf(M,5),t.Gf(S,5)),2&e){let r;t.iGM(r=t.CRH())&&(i.supportNgForm=r.first),t.iGM(r=t.CRH())&&(i._avatarFileInput=r.first)}},decls:17,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full"],[1,"mt-2","text-4xl","sm:text-2xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-8","sm:mt-12","p-6","pb-7","sm:p-10","sm:pb-7","shadow","rounded-2xl","bg-card"],["class","mb-8",3,"type","showIcon",4,"ngIf"],[1,"space-y-1","flex"],["class","flex flex-col w-2/3 p-6",4,"ngIf"],[1,"flex","flex-col","w-1/3"],[1,"mb-6","flex"],[1,"ml-auto","-mt-2","w-1/2","text-left"],["mat-icon-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],["class","flex flex-col w-full",4,"ngIf"],[1,"mb-8",3,"type","showIcon"],[1,"flex","flex-col","w-2/3","p-6"],[1,"flex","pt-0"],[1,"w-1/3","pr-2"],[1,"w-1/2"],[1,"w-1/2","pr-l"],[1,"",3,"formGroup"],[1,"flex"],["matInput","","required","",3,"formControlName"],[1,"w-2/3","pl-2"],[1,"fuse-mat-textarea","flex-auto",3,"ngClass"],["matInput","","matTextareaAutosize","",3,"formControlName","rows"],[1,"items-center"],["mat-button","","cdkFocusInitial","",3,"click"],["mat-button","",1,"cursor-pointer","mt-2","ml-2","bg-card","bg-red-900",3,"disabled","click"],[1,"ml-0","cursor-pointer",2,"color","white"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," Information du Projet "),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,H,2,3,"fuse-alert",5),t.TgZ(7,"div",6),t.YNc(8,R,14,2,"div",7),t.YNc(9,B,23,7,"div",7),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"button",11),t.NdJ("click",function(){return i.toggleEditMode()}),t._UZ(14,"mat-icon",12),t.qZA()()(),t.YNc(15,L,14,6,"div",13),t.YNc(16,X,5,2,"div",13),t.qZA()()()()()()),2&e&&(t.xp6(6),t.Q6J("ngIf",i.alert),t.xp6(2),t.Q6J("ngIf",!i.editMode),t.xp6(1),t.Q6J("ngIf",i.editMode),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:pencil"),t.xp6(1),t.Q6J("ngIf",i.editMode),t.xp6(1),t.Q6J("ngIf",!i.editMode))},directives:[d.O5,l._Y,l.JL,l.sg,m.KE,m.hX,_.Nt,l.Fj,l.Q7,l.JJ,l.u,d.mk,h.lW,Z.Hw,Y.wG],styles:[""]}),o})()}];let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,p.Bz.forChild(K),F.m]]}),o})()}}]);